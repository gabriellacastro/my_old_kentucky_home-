
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>My Old Kentucky Home</title>
<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>

<h1 id="title">My Old Kentucky Home</h1>

<video src="https://www.cs.tufts.edu/comp/20/my_old_kentucky_home.mp4" id="music_video" controls></video>

<div id="lyrics"></div>
        
        <script>
        ( function(win, doc) {
            var audioPlayer = doc.getElementById("audiofile");
            var subtitles = doc.getElementById("subtitles");
            var syncData = [
                  { "end": "0.15","start": "0.8","text": "The sun shines bright in My Old Kentucky Home," },
                  {"end": "0.15","start": "0.20","text": "'Tis summer, the people are gay;" },
                    { "end": "0.28","start": "0.20","text": "The corn-top's ripe and the meadow's in the bloom" },
                  {"end": "0.35","start": "0.29","text": "While the birds make music all the day." },
                    { "end": "0.42","start": "0.36","text": "The young folks roll on the little cabin floor," },
                  {"end": "0.49","start": "0.43","text": "All merry, all happy and bright;" },
                   { "end": "0.56","start": "0.50","text": "By 'n' by hard times comes a knocking at the door," },
                  {"end": "0.51","start": "0.56","text": "'Then My Old Kentucky Home, good night!;" },
                    { "end": "0.63","start": "0.56","text": "Chorus" },
                      { "end": "1.32","start": "0.63","text": "Weep no more my lady
Oh weep no more today;
We will sing one song
For My Old Kentucky Home
For My Old Kentucky Home, far away" },
                ];
            createSubtitle();

            function createSubtitle()
            {
                var element;
                for (var i = 0; i < syncData.length; i++) {
                    element = doc.createElement('span');
                    element.setAttribute("id", "c_" + i);
                    element.innerText = syncData[i].text + " ";
                    subtitles.appendChild(element);
                }
            }

            audioPlayer.addEventListener("timeupdate", function(e){
                syncData.forEach(function(element, index, array){
                    if( audioPlayer.currentTime >= element.start && audioPlayer.currentTime <= element.end )
                        subtitles.children[index].style.background = 'pink';
                });
            });
        }(window, document));
        </script>
    
</body>
</html>	
